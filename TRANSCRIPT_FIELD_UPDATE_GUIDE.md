# ì „ì‚¬ í•„ë“œ ì—…ë°ì´íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ ë³€ê²½ ì‚¬í•­ ìš”ì•½

### 1. ë°ì´í„°ë² ì´ìŠ¤ í•„ë“œ ë³€ê²½
ê¸°ì¡´ í•„ë“œëª…ì´ ë” ì§§ê³  ëª…í™•í•˜ê²Œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤:

| ê¸°ì¡´ í•„ë“œëª… | ìƒˆ í•„ë“œëª… | ì„¤ëª… |
|-----------|----------|------|
| `transcription` | `transcript` | Whisper ìë™ ì „ì‚¬ ê²°ê³¼ (ì›ë³¸) |
| `manual_transcription` | `manual_transcript` | ì‚¬ìš©ìê°€ ìˆ˜ë™ìœ¼ë¡œ í¸ì§‘í•œ ì „ì‚¬ ë‚´ìš© |

### 2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì ìš© ë‚´ì—­

#### Migration 0014: í•„ë“œëª… ë³€ê²½
```python
migrations.RenameField(
    model_name='audiorecord',
    old_name='manual_transcription',
    new_name='manual_transcript',
)
migrations.RenameField(
    model_name='audiorecord',
    old_name='transcription',
    new_name='transcript',
)
```

#### Migration 0015: ë°ì´í„° ë³µì‚¬
- ê¸°ì¡´ `transcript` ê°’ì„ `manual_transcript`ë¡œ ë³µì‚¬
- 982ê°œ ë ˆì½”ë“œ ì—…ë°ì´íŠ¸ ì™„ë£Œ
- ëª¨ë“  ê¸°ì¡´ ì „ì‚¬ ë°ì´í„° ë³´ì¡´ë¨

### 3. ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Whisper ìë™ ì „ì‚¬ ì‹¤í–‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   transcript ì €ì¥    â”‚  â† ìë™ ì „ì‚¬ ì›ë³¸
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ manual_transcript    â”‚  â† ì´ˆê¸°ê°’ = transcript
         â”‚      ì´ˆê¸°í™”          â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  ì‚¬ìš©ì ìˆ˜ë™ í¸ì§‘     â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ manual_transcript    â”‚  â† í¸ì§‘ëœ ê°’ ì €ì¥
         â”‚      ì—…ë°ì´íŠ¸        â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. UI í‘œì‹œ ë¡œì§

#### ì „ì‚¬ ë‚´ìš© í‘œì‹œ ìš°ì„ ìˆœìœ„:
1. **manual_transcriptê°€ ìˆìœ¼ë©´** â†’ manual_transcript í‘œì‹œ
   - transcriptì™€ ë‹¤ë¥´ë©´ "ìˆ˜ë™ í¸ì§‘ë¨" ì•„ì´ì½˜ í‘œì‹œ
2. **manual_transcriptê°€ ì—†ìœ¼ë©´** â†’ transcript í‘œì‹œ (ìë™ ì „ì‚¬ ì›ë³¸)
3. **ë‘˜ ë‹¤ ì—†ìœ¼ë©´** â†’ "ì „ì‚¬ ëŒ€ê¸°" ë©”ì‹œì§€

#### í…œí”Œë¦¿ ì½”ë“œ ì˜ˆì‹œ:
```django
{% if audio.manual_transcript %}
  {{ audio.manual_transcript }}
  {% if audio.manual_transcript != audio.transcript %}
    <i class="fas fa-edit"></i> ìˆ˜ë™ í¸ì§‘ë¨
  {% endif %}
{% elif audio.transcript %}
  {{ audio.transcript }}
{% else %}
  ì „ì‚¬ ëŒ€ê¸°
{% endif %}
```

### 5. ìˆ˜ì •ëœ íŒŒì¼ ëª©ë¡

#### Python íŒŒì¼:
- âœ… `voice_app/models.py` - í•„ë“œ ì •ì˜
- âœ… `voice_app/views.py` - ëª¨ë“  views í•¨ìˆ˜
- âœ… `voice_app/tasks.py` - Whisper ì „ì‚¬ task
- âœ… `voice_app/views_3.py` - ëª¨ë°”ì¼ API
- âœ… `voice_app/admin.py` - ê´€ë¦¬ì ê²€ìƒ‰ í•„ë“œ
- âœ… `voice_app/migrations/0014_rename_transcription_fields.py`
- âœ… `voice_app/migrations/0015_copy_transcript_to_manual.py`

#### HTML í…œí”Œë¦¿:
- âœ… `templates/voice_app/audio_detail.html` - ìƒì„¸ í˜ì´ì§€
- âœ… `templates/voice_app/audio_list.html` - ëª©ë¡ í˜ì´ì§€
- âœ… `templates/voice_app/category_audio_list.html` - ì¹´í…Œê³ ë¦¬ ëª©ë¡
- âœ… `templates/voice_app/identifier_audio_list.html` - ê³ ìœ ID ëª©ë¡
- âœ… `templates/voice_app/audio_detail_clean.html` - í´ë¦° ë²„ì „

### 6. API ì‘ë‹µ ë³€ê²½

#### GET /api/audio/{id}/
```json
{
  "id": 1,
  "transcript": "...",           // í‘œì‹œìš© (manual_transcript ìš°ì„ )
  "auto_transcript": "...",      // ìë™ ì „ì‚¬ ì›ë³¸
  "manual_transcript": "...",    // ìˆ˜ë™ ì „ì‚¬
  ...
}
```

#### PUT/PATCH /api/audio/{id}/
ìˆ˜ì • ê°€ëŠ¥í•œ í•„ë“œ:
- `manual_transcript` âœ… (ë³€ê²½ë¨)
- `gender`, `age`, `category` ë“±

### 7. í¼ í•„ë“œ ë³€ê²½

#### ì „ì‚¬ ìˆ˜ì • í¼:
```html
<!-- ê¸°ì¡´ -->
<textarea name="transcription">{{ audio.transcription }}</textarea>

<!-- ë³€ê²½ í›„ -->
<textarea name="manual_transcript">
  {{ audio.manual_transcript|default:audio.transcript }}
</textarea>
```

### 8. ë™ì‘ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] Whisper ì „ì‚¬ ë²„íŠ¼ í´ë¦­ â†’ `transcript` í•„ë“œ ì €ì¥
- [ ] `manual_transcript` ìë™ ì´ˆê¸°í™” (transcriptì™€ ë™ì¼í•œ ê°’)
- [ ] ì „ì‚¬ ìˆ˜ì • í¼ì—ì„œ ë‚´ìš© í¸ì§‘ â†’ `manual_transcript` ì—…ë°ì´íŠ¸
- [ ] ìƒì„¸ í˜ì´ì§€ì—ì„œ ìˆ˜ë™ í¸ì§‘ ì•„ì´ì½˜ í‘œì‹œ
- [ ] ëª©ë¡ í˜ì´ì§€ì—ì„œ ì „ì‚¬ ë‚´ìš© ì˜¬ë°”ë¥´ê²Œ í‘œì‹œ
- [ ] API ì‘ë‹µì— ë‘ í•„ë“œ ëª¨ë‘ í¬í•¨

### 9. ë¡¤ë°± ë°©ë²•

ë§Œì•½ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì´ì „ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ë¡¤ë°±:

```bash
# ë§ˆì´ê·¸ë ˆì´ì…˜ ë˜ëŒë¦¬ê¸°
python manage.py migrate voice_app 0013

# ë˜ëŠ” íŠ¹ì • ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ
python manage.py migrate voice_app 0013_audiorecord_manual_transcription_and_more
```

### 10. í–¥í›„ ê°œì„  ì‚¬í•­

1. **ì „ì‚¬ íˆìŠ¤í† ë¦¬ ì¶”ê°€**
   - í¸ì§‘ ì´ë ¥ ì¶”ì 
   - ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œ

2. **ë¹„êµ ë·° ì¶”ê°€**
   - ìë™ ì „ì‚¬ vs ìˆ˜ë™ ì „ì‚¬ ë‚˜ë€íˆ ë³´ê¸°
   - Diff í‘œì‹œ

3. **í¸ì§‘ í†µê³„**
   - ì–¼ë§ˆë‚˜ ë§ì€ ì „ì‚¬ê°€ ìˆ˜ë™ í¸ì§‘ë˜ì—ˆëŠ”ì§€
   - í‰ê·  í¸ì§‘ ì‹œê°„

---

## ğŸ“Š ë§ˆì´ê·¸ë ˆì´ì…˜ ê²°ê³¼

- **ì´ ë ˆì½”ë“œ ìˆ˜**: 982ê°œ
- **í•„ë“œëª… ë³€ê²½**: ì„±ê³µ âœ…
- **ë°ì´í„° ë³µì‚¬**: ì„±ê³µ âœ…
- **ë°ì´í„° ì†ì‹¤**: ì—†ìŒ âœ…

## ğŸ¯ í•µì‹¬ ê°œë…

**transcript (ìë™ ì „ì‚¬)**:
- Whisperê°€ ìƒì„±í•œ ì›ë³¸ ì „ì‚¬ ê²°ê³¼
- ì½ê¸° ì „ìš©ìœ¼ë¡œ ë³´ì¡´
- ì°¸ê³ ìš©ìœ¼ë¡œ ìœ ì§€

**manual_transcript (ìˆ˜ë™ ì „ì‚¬)**:
- ì‚¬ìš©ìê°€ í¸ì§‘ ê°€ëŠ¥
- ì´ˆê¸°ê°’ì€ transcriptì™€ ë™ì¼
- UIì—ì„œ ìš°ì„ ì ìœ¼ë¡œ í‘œì‹œ

ì´ êµ¬ì¡°ë¥¼ í†µí•´:
1. ìë™ ì „ì‚¬ ì›ë³¸ ë³´ì¡´
2. ì‚¬ìš©ì í¸ì§‘ ì¶”ì 
3. í’ˆì§ˆ ê´€ë¦¬ ê°€ëŠ¥

---

**ì‘ì„±ì¼**: 2025-01-27  
**ì ìš© ë²„ì „**: Django 4.2.24  
**ìƒíƒœ**: âœ… ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸ ëŒ€ê¸°
